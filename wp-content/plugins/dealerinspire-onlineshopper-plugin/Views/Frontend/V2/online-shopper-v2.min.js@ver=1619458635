var OnlineShopperV2Garage={vehicles:[],badgeCount:0,widgets:[],isAuthenticated:!1,garageUpdateEvent:"OnlineShopperV2GarageUpdate",updateWidgets:function(){OnlineShopperV2Garage.widgets=document.querySelectorAll(".online-shopper-garage-widget")},checkForAuthentication:function(e){var a=OnlineShopperV2Garage,n=e.detail;a.isAuthenticated=!(!n||!n.garage)&&n.garage.isAuthenticated},updateVehicles:function(e){var a=OnlineShopperV2Garage,n=[];e.detail&&e.detail.vehicles&&e.detail.vehicles.forEach(function(e){"vin"in e&&"link"in e&&n.push(e)}),a.vehicles=n},updateBadgeCount:function(){OnlineShopperV2Garage.badgeCount=OnlineShopperV2Garage.vehicles.length},renderWidget:function(e){var t=OnlineShopperV2Garage,r=OnlineShopperV2Garage.vehicles;t.widgets.forEach(function(e){var a=e.querySelector(".garage-widget-icon__badge"),n=e.querySelector(".garage-widget-dropdown__vehicles"),i="";e.querySelector(".garage-widget-dropdown__button");t.isAuthenticated?e.classList.add("online-shopper-garage-widget--isAuthenticated"):e.classList.remove("online-shopper-garage-widget--isAuthenticated"),0!=t.badgeCount?(e.classList.remove("online-shopper-garage-widget--inactive"),a&&(a.innerHTML=t.badgeCount),r.forEach(function(e){i+='<a class="garage-vehicle" href="'+e.link+'">',i+='<div class="garage-vehicle__image"><img src="'+e.thumbnail+'" alt="'+e.vin+'"></div>',i+='<div class="garage-vehicle__info"><div class="garage-vehicle__title"><span class="first-line">'+e.type+" "+e.year+" "+e.make+'</span><span class="second-line">'+e.model+" "+e.trim+"</span></div>",i+='<div class="garage-vehicle__pricing">',e.msrp!==e.price&&(i+='<span class="first-line">MSRP: '+t.formatPrice(e.msrp)+"</span>"),i+='<span class="second-line">YOUR PRICE: '+t.formatPrice(e.payments[e.payments.selected].price)+"</span></div></div>",i+="</a>"}),n.innerHTML=i):e.classList.add("online-shopper-garage-widget--inactive")})},renderButtonState:function(){var a=OnlineShopperV2Garage,e=OnlineShopperV2Garage.vehicles,n="online-shopper-cta-button--v2--saved",i="online-shopper-cta-button--v2--isAuthenticated",t=e.map(function(e){return e.vin});document.querySelectorAll(".online-shopper-cta-button--v2").forEach(function(e){e.classList.remove(n),a.isAuthenticated?e.classList.add(i):e.classList.remove(i)}),t.forEach(function(e){document.querySelectorAll('*[data-OS-VIN="'+e+'"]').forEach(function(e){e.classList.add(n)})})},handleGarageVehicleChange:function(e){var a=OnlineShopperV2Garage;a.updateWidgets(),a.widgets&&(a.checkForAuthentication(e),a.updateVehicles(e),a.updateBadgeCount(),a.renderButtonState(),a.renderWidget())},formatPrice:function(e){return"string"==typeof e&&isNaN(e)||0==e?e:"$"+Math.round(parseFloat(e,10)).toLocaleString()},listen:function(){document.addEventListener(OnlineShopperV2Garage.garageUpdateEvent,OnlineShopperV2Garage.handleGarageVehicleChange)}};OnlineShopperV2Garage.listen();