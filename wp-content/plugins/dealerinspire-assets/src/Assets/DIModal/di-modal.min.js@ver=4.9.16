var DI_Modal=function(){var r=null,d=null,a=null,l=[],c=!1,n=null,t={class:""},e=function(){return'<div class="di-modal-box"><div class="di-modal-box-inner"></div>'+o()+"</div>"},o=function(){return'<button aria-label="close" class="di-modal-close"></button>'},s={placeholder:'<div class="di-modal-placeholder"></div>',container:'<div id="di-modal" role="dialog" aria-hidden="true" tabindex="-1"><div class="modal-wrap">'+e()+"</div></div>",iframe:"<iframe src={src}></iframe>"},i=function(){document.body.insertAdjacentHTML("beforeEnd",s.container)},u=function(){r=document.querySelector("#di-modal"),document.querySelector("#di-modal .di-modal-close")},m=function(){document.body.addEventListener("click",p),document.body.addEventListener("keyup",p),document.body.addEventListener("click",f)},f=function(e){var t=function(e,t){var n,o;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n=e,!0)}),e&&e[n](t))return e;for(;e;){if((o=e.parentElement)&&o[n](t))return o;e=o}return null}(e.target,".di-modal");t&&(n=t,e.preventDefault(),q("beforeOpen.di.modal",{event:t}),b(),v(t))},p=function(e){A(r,"faded-in")&&("click"===e.type&&e.target&&A(e.target,"di-modal-close")||"keyup"===e.type&&"Escape"===e.key)&&(e.preventDefault(),b())},v=function(e){if(function(e){if("#"==(a="string"==typeof e?e:e.getAttribute("href")).charAt(0)?(d="content",a=a.replace(/\./g,"\\.")):d="iframe",a&&("content"!=d||document.querySelector(a))&&"content"==d){var t=document.querySelector(a).getAttribute("data-modal-classes");if(t&&-1<(l=t.split(" ")).indexOf("modal--action-bar")&&(c=!0),document.querySelector(a).getAttribute("data-mobileSize")){var n=document.querySelector(a).getAttribute("data-mobileSize");l.push("modal-size--mobile-"+n)}}}(e),S(),"content"==d){var t=document.querySelector(a);if(void 0!==t&&null!=t){if(A(r,"faded-in")){var n=document.querySelector(".di-modal-placeholder"),o=document.querySelector("#di-modal .di-modal-box-inner").children[0];n.insertAdjacentElement("afterend",o),k(o),n.parentNode.removeChild(n)}t.insertAdjacentHTML("afterend",s.placeholder),document.querySelector("#di-modal .di-modal-box-inner").appendChild(t),function(e){e.style.display="block"}(t),y(),g(t)}else console.log("Cannot find content for modal.")}else if("iframe"==d)if(void 0!==a&&""!==a){var i=function(n,o){return bracket_str=n.match(/\{([^}]+)\}/g),bracket_str.forEach(function(e){for(var t in o)e.replace(/[{}]/g,"")==t&&(n=n.replace(e,o[t]))}),n}(s.iframe,{src:a});y(),document.querySelector("#di-modal .di-modal-box-inner").insertAdjacentHTML("beforeEnd",i),x(r,"iframe-open")}else console.log("Cannot find url for modal")},b=function(){if(A(r,"faded-in")){var e=document.querySelector("#di-modal .di-modal-box-inner").children[0];if(h(),E(),"content"==d){var t=document.querySelector(".di-modal-placeholder");t?(t.insertAdjacentElement("afterend",e),k(e),t.parentNode.removeChild(t)):e.remove()}else L(r,"iframe-open"),document.querySelector("#di-modal iframe").parentNode.removeChild(document.querySelector("#di-modal iframe"))}},y=function(){q("onOpen.di.modal"),x(r,"faded-in"),x(document.body,"di-modal-open"),1==c&&x(document.body,"di-modal-enable-scroll"),r.setAttribute("aria-hidden","false"),r.setAttribute("tabindex","0"),r.focus(),q("onOpen.di.modal.loaded"),q("di_check_visible_forms")},h=function(){L(r,"faded-in"),L(document.body,"di-modal-open"),r.setAttribute("aria-hidden","true"),r.setAttribute("tabindex","-1"),n&&(n.focus(),n=null),q("onClose.di.modal")},g=function(e){for(var t=e.querySelectorAll(".swiper-wrapper"),n=0;n<t.length;n++)void 0!==t[n].parentNode.swiper&&t[n].parentNode.swiper.update()},S=function(){if(0<l.length)for(var e=0;e<l.length;e++)x(r,l[e])},E=function(){if(0<l.length){for(var e=0;e<l.length;e++)L(r,l[e]);l=[]}},q=function(t,n){try{var o=new CustomEvent(t,{detail:n})}catch(e){(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n)}document.dispatchEvent(o)};function A(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function x(e,t){e.classList?e.classList.add(t):A(e,t)||(e.className+=" "+t)}function L(e,t){if(e.classList)e.classList.remove(t);else if(A(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function k(e){e.style.display="none"}var C=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e};return{options:t,setOptions:function(e){!function(e){C(t,e),t.class&&x(r,t.class)}(e)},triggerOpen:v,triggerClose:b,init:function(){i(),u(),m()}}}();DI_Modal.init();